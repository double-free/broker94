<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OesApi: OES-API Update Guide</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OesApi
   &#160;<span id="projectnumber">0.16.1.9</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">OES-API Update Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>OES_0.16.1.9 / 2020-11-20 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 但建议升级到0.16.0.3及之后版本, 以支持期权业务</li>
<li>证券子类别枚举(eOesSubSecurityTypeT) 中:<ul>
<li>新增 基础设施基金(OES_SUB_SECURITY_TYPE_FUND_REITS)</li>
</ul>
</li>
<li>股东账户交易权限枚举(eOesTradingPermissionT) 中:<ul>
<li>字段重命名 基础设施基金交易权限(OES_PERMIS_INFRASTRUCTURE_FUND =&gt; OES_PERMIS_REITS)</li>
</ul>
</li>
<li>证券属性枚举(eOesSecurityAttributeT) 中:<ul>
<li>删除 基础设施基金(OES_SECURITY_ATTR_INFRASTRUCTURE_FUND)</li>
</ul>
</li>
<li>重命名错误码的宏定义<ul>
<li>1290, 股东账户没有交易基础设施基金的权限 (OESERR_NO_INFRASTRUCTURE_FUND_PERM =&gt; OESERR_NO_REITS_PERM)</li>
</ul>
</li>
<li>增加辅助接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_GetClientType  </td><td class="markdownTableBodyNone">返回通道对应的客户端类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_GetClientStatus  </td><td class="markdownTableBodyNone">返回通道对应的客户端状态   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_GetBusinessType  </td><td class="markdownTableBodyNone">返回通道对应的业务类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_IsBusinessSupported  </td><td class="markdownTableBodyNone">返回系统是否支持指定的业务类别   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_SetRetainExtDataAble  </td><td class="markdownTableBodyNone">设置是否保留(不清空)由应用层自定义使用的扩展存储空间数据 (__extData)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_IsRetainExtDataAble  </td><td class="markdownTableBodyNone">返回是否保留(不清空)由应用层自定义使用的扩展存储空间数据   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_SetThreadBusinessType  </td><td class="markdownTableBodyNone">设置当前线程登录OES时所期望对接的业务类型 (正常情况下无需调用)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_GetThreadBusinessType  </td><td class="markdownTableBodyNone">返回当前线程登录OES时所期望对接的业务类型   </td></tr>
</table>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>完善对深交所基础设施基金产品交易的支持</li>
<li>其它细节完善和优化</li>
</ol>
<hr/>
<h2>OES_0.16.1.7 / 2020-09-30 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 但建议升级到0.16.0.3及之后版本, 以支持期权业务</li>
<li>新增 证券属性定义(eOesSecurityAttributeT) 枚举类型</li>
<li>股东账户交易权限枚举(eOesTradingPermissionT)中新增:<ul>
<li>可转换公司债券交易权限 (OES_PERMIS_CONVERTIBLE_BOND)</li>
<li>基础设施基金交易权限 (OES_PERMIS_INFRASTRUCTURE_FUND)</li>
</ul>
</li>
<li>'现货产品基础信息 (<a class="el" href="../../d7/d79/structOesStockBaseInfoT.html" title="现货产品基础信息的结构体定义 ">OesStockBaseInfoT</a>)' 中启用 证券属性 (securityAttribute) 字段</li>
<li>'证券发行基础信息(OesIssueBaseInfoT)' 中启用 证券属性 (securityAttribute) 字段</li>
<li>调整错误码<ul>
<li>新增 '1289, 股东账户没有交易可转换公司债券的权限'</li>
<li>新增 '1290, 股东账户没有交易基础设施基金的权限'</li>
</ul>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持可转换公司债券的适当性检查</li>
<li>支持上交所科创板ETF和科创板LOF产品的交易</li>
<li>支持深交所基础设施基金产品的交易及适当性检查</li>
<li>其它细节完善和优化</li>
</ol>
<hr/>
<h2>OES_0.16.1.4 / 2020-08-28 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 但建议升级到0.16.0.3及之后版本, 以支持期权业务</li>
<li>fix: 完备Windows平台下的WSACleanup资源释放处理, 避免额外调用WSACleanup导致外部系统的网络操作异常</li>
<li>fix: 修复Win64下不能正确获取纳秒级时间戳的问题</li>
<li>fix: 修复MinGW下 struct timespec 结构体未按64位对齐的问题</li>
<li>API结算单重复确认不再返回错误</li>
<li>'客户端总览信息 (<a class="el" href="../../d8/da6/structOesClientOverviewT.html" title="客户端总览信息内容 ">OesClientOverviewT</a>)' 中新增如下字段<ul>
<li>新增 最大委托笔数限制 (maxOrdCount) 字段</li>
</ul>
</li>
<li>为异步API增加用于返回尚未被处理的剩余数据数量的辅助接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesAsyncApi_GetAsyncQueueTotalCount  </td><td class="markdownTableBodyNone">返回异步API累计已入队的消息数量   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesAsyncApi_GetAsyncQueueRemainingCount  </td><td class="markdownTableBodyNone">返回队列中尚未被处理的剩余数据数量   </td></tr>
</table>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>创业板注册制业务的细节调整</li>
<li>完善系统在异常场景下24小时持续运行的可靠性</li>
<li>新增事中风控处理<ul>
<li>风控规则1: 客户最大委托笔数限制, 触发后客户被限制开仓</li>
<li>风控规则2: 营业部委托流水号限制, 触发后营业部所有客户被限制开仓</li>
</ul>
</li>
<li>其它细节完善和优化</li>
</ol>
<hr/>
<h2>OES_0.16.1.2 / 2020-07-07 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 但建议升级到0.16.0.3及之后版本, 以支持期权业务<ul>
<li>如果使用到了时间戳字段下的微秒时间, 则需要升级最新的API, 因为时间戳字段已全部升级为纳秒级时间戳。具体请参见注意事项说明</li>
</ul>
</li>
<li>fix: 修复在Win32下因为对齐问题导致指针位置不正确的BUG (正常不会触发, 只有在启用异步API的异步回调处理时才会触发)</li>
<li>异步API新增如下接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesAsyncApi_SendReportSynchronization  </td><td class="markdownTableBodyNone">发送回报同步消息接口   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesAsyncApi_IsAllTerminated  </td><td class="markdownTableBodyNone">检查所有线程是否均已安全退出   </td></tr>
</table>
</li>
<li>同步API新增如下接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_GetChannelGroupLastRecvTime  </td><td class="markdownTableBodyNone">返回通道组最近接收消息时间   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_GetChannelGroupLastSendTime  </td><td class="markdownTableBodyNone">返回通道组最近发送消息时间   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_HasStockStatus  </td><td class="markdownTableBodyNone">返回现货产品是否具有指定状态   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">__OesApi_CheckApiVersion  </td><td class="markdownTableBodyNone">检查API版本是否匹配 (检查API头文件和库文件的版本是否匹配)   </td></tr>
</table>
</li>
<li>为支持创业板注册制改革, 现货产品信息 (OesStockItemT) 中新增如下字段: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">字段  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isRegistration  </td><td class="markdownTableBodyNone">是否注册制   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">securityStatus  </td><td class="markdownTableBodyNone">证券状态   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">securityAttribute  </td><td class="markdownTableBodyNone">证券属性 (保留字段)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isCrdMarginTradeUnderlying  </td><td class="markdownTableBodyNone">是否为融资标的   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isCrdShortSellUnderlying  </td><td class="markdownTableBodyNone">是否为融券标的   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isCrdCollateral  </td><td class="markdownTableBodyNone">是否为融资融券担保品   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isNoProfit  </td><td class="markdownTableBodyNone">是否尚未盈利   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isWeightedVotingRights  </td><td class="markdownTableBodyNone">是否存在投票权差异   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isVie  </td><td class="markdownTableBodyNone">是否具有协议控制框架   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">lmtBuyQtyUnit  </td><td class="markdownTableBodyNone">限价买入单位 (重命名 buyQtyUnit)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">lmtSellQtyUnit  </td><td class="markdownTableBodyNone">限价卖出单位 (重命名 sellQtyUnit)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">mktBuyQtyUnit  </td><td class="markdownTableBodyNone">市价买入单位   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">mktSellQtyUnit  </td><td class="markdownTableBodyNone">市价卖出单位   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">parValue  </td><td class="markdownTableBodyNone">面值 (重命名 parPrice)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">auctionLimitType  </td><td class="markdownTableBodyNone">连续交易时段的有效竞价范围限制类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">auctionReferPriceType  </td><td class="markdownTableBodyNone">连续交易时段的有效竞价范围基准价类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">auctionUpDownRange  </td><td class="markdownTableBodyNone">连续交易时段的有效竞价范围涨跌幅度   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">listDate  </td><td class="markdownTableBodyNone">上市日期   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">maturityDate  </td><td class="markdownTableBodyNone">到期日期 (仅适用于债券等有发行期限的产品)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">underlyingSecurityId  </td><td class="markdownTableBodyNone">基础证券代码   </td></tr>
</table>
</li>
<li>为支持创业板注册制改革, 证券发行信息 (OesIssueItemT) 中新增如下字段: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">字段  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isRegistration  </td><td class="markdownTableBodyNone">是否注册制   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">securityAttribute  </td><td class="markdownTableBodyNone">证券属性 (保留字段)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isNoProfit  </td><td class="markdownTableBodyNone">是否尚未盈利   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isWeightedVotingRights  </td><td class="markdownTableBodyNone">是否存在投票权差异   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isVie  </td><td class="markdownTableBodyNone">是否具有协议控制框架   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">alotRecordDay  </td><td class="markdownTableBodyNone">配股股权登记日   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">alotExRightsDay  </td><td class="markdownTableBodyNone">配股股权除权日   </td></tr>
</table>
</li>
<li>查询ETF成份证券信息接口调整<ul>
<li>查询过滤条件 (<a class="el" href="../../df/d52/structOesQryEtfComponentFilterT.html" title="查询ETF成份证券信息过滤条件 ">OesQryEtfComponentFilterT</a>) 中:<ul>
<li>查询条件 ETF基金申赎代码 (fundId) 字段不再是必填项</li>
<li>新增查询条件 ETF基金市场代码 (fundMktId) 字段</li>
</ul>
</li>
<li>ETF成份证券信息 (<a class="el" href="../../db/db9/structOesEtfComponentItemT.html" title="ETF基金成份证券信息内容 ">OesEtfComponentItemT</a>) 中新增如下字段: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">字段  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">fundMktId  </td><td class="markdownTableBodyNone">ETF基金市场代码   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isTrdComponent  </td><td class="markdownTableBodyNone">是否是作为申赎对价的成份证券   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">discountRatio  </td><td class="markdownTableBodyNone">赎回折价比例   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">securityName  </td><td class="markdownTableBodyNone">成份证券名称   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">premiumRatio  </td><td class="markdownTableBodyNone">申购溢价比例 (重命名 premiumRate)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">redemptionSubCash  </td><td class="markdownTableBodyNone">赎回替代金额 (重命名 redemptionCashSub)   </td></tr>
</table>
</li>
</ul>
</li>
<li>新增证券子类型<ul>
<li>创业板存托凭证 (OES_SUB_SECURITY_TYPE_STOCK_GEMCDR)</li>
<li>可交换债券 (OES_SUB_SECURITY_TYPE_BOND_EXG)</li>
<li>商品期货ETF (OES_SUB_SECURITY_TYPE_ETF_COMMODITY_FUTURES)</li>
</ul>
</li>
<li>调整买卖类型 (eOesBuySellTypeT) 定义:<ul>
<li>重命名 质押式逆回购 (OES_BS_TYPE_CREDIT_SELL =&gt; OES_BS_TYPE_REVERSE_REPO)</li>
<li>废弃 OES_BS_TYPE_CREDIT_SELL (融资买入或质押式逆回购)</li>
<li>废弃 OES_BS_TYPE_CREDIT_BUY (融资买入)</li>
</ul>
</li>
<li>股东账户交易权限枚举(eOesTradingPermissionT)中新增:<ul>
<li>商品期货ETF申赎权限 (OES_PERMIS_COMMODITY_FUTURES_ETF)</li>
</ul>
</li>
<li>删除已经过时的期权相关查询接口和结构体定义, 包括:<ul>
<li>删除接口<ul>
<li>查询单条期权持仓信息 (OesApi_QuerySingleOptHolding)</li>
<li>查询期权持仓信息 (OesApi_QueryOptHolding)</li>
<li>查询期权产品信息 (OesApi_QueryOption)</li>
</ul>
</li>
<li>删除结构体<ul>
<li>期权合约结构体 (OesOptionItemT)</li>
<li>期权持仓结构体 (<a class="el" href="../../df/d91/structOesOptHoldingItemT.html" title="查询到的期权持仓信息内容 ">OesOptHoldingItemT</a>)</li>
</ul>
</li>
<li>从0.16版本开始正式支持期权业务</li>
</ul>
</li>
<li>优化异步API<ul>
<li>为异步API增加是否优先使用大页内存来创建异步队列的配置项</li>
<li>为异步API的I/O线程增加追加模式输出的配置项</li>
<li>为异步API的I/O线程增加支持忙等待的配置选项，以使异步队列的延迟统计结果更接近实际情况</li>
<li>'异步修改客户端密码 (OesAsyncApi_SendChangePasswordReq)' 接口中删除多余的应答参数</li>
</ul>
</li>
<li>优化时间戳精度, 将系统下的时间戳全部升级为纳秒级时间戳, 以提高时延统计的精度<ul>
<li>时间戳字段的数据类型从 STimevalT/STimeval32T 变更为 STimespecT/STimespec32T</li>
<li>协议保持兼容, 但如果使用到了时间戳字段下的微秒时间(tv_usec 字段), 则需要修改为纳秒时间(tv_nsec 字段), 否则会因为时间单位的调整而导致时延计算错误</li>
</ul>
</li>
<li>API中添加vs2015工程样例</li>
<li>调整错误码<ul>
<li>删除 '1242, 出入金笔数超过限制'</li>
<li>调整描述内容 '1249, 不支持市价委托或账户无市价委托的交易权限'</li>
<li>调整描述内容 '1258, 股东账户没有交易货币ETF的权限'</li>
<li>调整描述内容 '1250, 股东账户没有交易创业板核准制证券的权限'</li>
<li>新增 '1285, 股东账户没有交易债券ETF的权限'</li>
<li>新增 '1286, 股东账户没有交易黄金ETF的权限'</li>
<li>新增 '1287, 股东账户没有交易商品期货ETF的权限'</li>
<li>新增 '1288, 股东账户没有交易创业板注册制证券的权限'</li>
</ul>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持创业板注册制改革</li>
<li>上海市场风险警示(ST/*ST)证券和退市整理证券不再支持市价买卖</li>
<li>其它细节完善和性能优化</li>
</ol>
<h3>3. 注意事项说明</h3>
<ol type="1">
<li>时间戳精度的修改没法完全兼容之前的API, 如果使用到了时间戳字段下的微秒时间(tv_usec 字段), 则需要升级API到最新版本<ul>
<li>通常只有在统计延迟时才会使用到微秒时间(tv_usec)字段, 如果使用到了该字段, 则需要改为使用纳秒时间(tv_nsec)字段, 否则会因为时间单位的调整而导致时延计算错误</li>
<li>升级API以后, 可以通过检查有无编译错误的方式, 来检查是否使用到了 tv_usec 字段。如果没有编译错误就无需再做额外的调整</li>
</ul>
</li>
<li>查询ETF成份证券信息接口的行为有如下变化:<ul>
<li>查询过滤条件中的 fundId 字段不再是必填项<ul>
<li>查询过滤条件如中不填写 fundId 字段, 查询结果会返回所有成份证券信息。 客户端需要通过返回内容中的 fundId 来判断该成份证券属于哪支ETF。</li>
</ul>
</li>
<li>对于深圳跨市场ETF，返回内容将包括其上海成份证券信息<ul>
<li>对深交所跨市场ETF进行申赎时应使用 159900 虚拟成份券进行沪市成份证券份额的现金替代处理, 深圳跨市场ETF中的上海成份证券信息仅作参考使用。</li>
<li>如需过滤深圳跨市场ETF中的上海成份证券信息, 可通过 '是否是作为申赎对价的成份证券 (isTrdComponent)' 字段来判断。 对于深圳跨市场ETF中的上海成份证券, 该字段取值为0。</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr/>
<h2>OES_0.16.0.5 / 2020-04-17 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 但建议升级到0.16.0.3及之后版本, 以支持期权业务</li>
<li>新增如下错误码 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">错误码  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1284  </td><td class="markdownTableBodyNone">投资者未进行程序化交易报备   </td></tr>
</table>
</li>
<li>调整示例代码的目录位置</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>无 <hr/>
</li>
</ol>
<h2>OES_0.16.0.4 / 2020-02-28 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 但建议升级到0.16.0.3及之后版本, 以支持期权业务</li>
<li>fix: 为API增加对SIGPIPE信号的屏蔽处理，以避免连接断开以后重复send导致程序异常退出</li>
<li>增加异步API接口, 以支持异步回报处理和连接管理。原API接口不受影响, 可以正常使用<ul>
<li>支持异步接收回报数据</li>
<li>支持自动的连接管理 (自动识别异常并重建连接)</li>
<li>支持异步数据落地和延迟统计 (可以通过配置文件进行控制, 默认为禁用)</li>
<li>主要接口:<ul>
<li>OesAsyncApi_CreateContext</li>
<li>OesAsyncApi_AddChannel</li>
<li>OesAsyncApi_Start</li>
<li>OesAsyncApi_Stop</li>
<li>OesAsyncApi_ReleaseContext</li>
</ul>
</li>
<li>样例代码参见: oes_api/samples/c_sample/03_oes_async_api_sample.c</li>
</ul>
</li>
<li>重构C++样例代码, 改为基于异步API实现, 增加如下特性:<ul>
<li>支持自动的连接管理 (自动识别异常并重建连接)</li>
<li>增加和完善了 OnConnected/OnDisconnected 回调接口 (客户端可以不用实现这两个接口, 采用默认实现即可)</li>
<li>样例代码及更新说明参见: oes_api/samples/cpp_sample/oes_client_sample.h</li>
</ul>
</li>
<li>API新增如下接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_IsBusinessSupported  </td><td class="markdownTableBodyNone">返回系统是否支持指定的业务类别   </td></tr>
</table>
</li>
<li>新增如下错误码 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">错误码  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1280  </td><td class="markdownTableBodyNone">有未成交的卖出委托时禁止买入   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1281  </td><td class="markdownTableBodyNone">有未成交的买入委托时禁止卖出   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1282  </td><td class="markdownTableBodyNone">客户当日交易总量超出限制   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1283  </td><td class="markdownTableBodyNone">委托数量超出报备的单笔委托数量限制   </td></tr>
</table>
</li>
<li>股票持仓信息 (<a class="el" href="../../df/d18/structOesStkHoldingItemT.html" title="查询到的股票持仓信息内容 ">OesStkHoldingItemT</a>) 结构体字段变更<ul>
<li>新增 当日最大可减持额度 (maxReduceQuota) 字段</li>
</ul>
</li>
<li>期权标的持仓信息 (OesOptUnderlyingHoldingItemT) 结构体字段变更<ul>
<li>新增 当日最大可减持额度 (maxReduceQuota) 字段</li>
</ul>
</li>
<li>资金变动回报 (<a class="el" href="../../dd/d51/structOesCashAssetReportT.html" title="客户资金回报结构体定义 ">OesCashAssetReportT</a>) 和 客户资金信息 (<a class="el" href="../../dd/da9/structOesCashAssetItemT.html" title="客户资金信息内容 ">OesCashAssetItemT</a>) 结构体字段变更<ul>
<li>新增 未对冲实时价格保证金 (totalMarketMargin) 字段</li>
<li>新增 已对冲实时价格保证金 (totalNetMargin) 字段</li>
</ul>
</li>
<li>券商参数信息 (<a class="el" href="../../de/dad/structOesBrokerParamsInfoT.html" title="券商参数信息内容 ">OesBrokerParamsInfoT</a>)' 结构体字段变更<ul>
<li>新增 服务端业务范围 (businessScope) 字段</li>
<li>新增 期权扩展参数 (optionExt) 结构<ul>
<li>其中新增 投资人出金提取线 (withdrawLineRatio) 字段</li>
</ul>
</li>
</ul>
</li>
<li>期权行权指派信息 (OesOptExerciseAssignItemT)' 结构体字段变更<ul>
<li>新增 期权合约名称 (securityName) 字段</li>
</ul>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持大股东减持控制</li>
<li>支持深交所公开增发业务</li>
<li>支持深交所期权备兑业务</li>
<li>加强期权业务的风控检查, 包括客户自成交、程序化报备信息等</li>
<li>其它细节优化与完善</li>
</ol>
<h3>3. 注意事项说明</h3>
<ol type="1">
<li>C++样例代码发生了如下变化, 请参考更新说明进行升级处理:<ul>
<li>删除以下连接重建相关的接口, 不再需要显式的重建连接<ul>
<li>ReconnectOrdChannel</li>
<li>ReconnectRptChannel</li>
<li>ReconnectQryChannel</li>
<li>SendReportSynchronization</li>
</ul>
</li>
<li>删除或重名以下公有成员变量<ul>
<li>删除 apiEnv</li>
<li>重命名 apiCfg =&gt; _apiCfg</li>
</ul>
</li>
<li>简化和废弃了 Start 方法的参数, 具体描述参见 Start 方法的函数注释</li>
</ul>
</li>
</ol>
<hr/>
<h2>OES_0.16.0.1 / 2019-12-12 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>0.16 版本的API中期权业务的市价委托类型控制不准确, 建议升级到当前版本</li>
<li>新增上证期权业务委托类型枚举定义 (eOesOrdTypeShOptT)</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>完善期权业务的相关细节</li>
<li>修复其它系统缺陷, 增强系统的健壮性</li>
</ol>
<hr/>
<h2>OES_0.16 / 2019-11-20 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级 (建议升级, 以支持期权业务)</li>
<li>API新增如下接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_SendOptSettlementConfirmReq  </td><td class="markdownTableBodyNone">期权账户结算单确认   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_QueryOption  </td><td class="markdownTableBodyNone">查询期权产品信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_QueryOptHolding  </td><td class="markdownTableBodyNone">查询期权持仓信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_QuerySingleOptHolding  </td><td class="markdownTableBodyNone">查询单条期权持仓信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_QueryOptUnderlyingHolding  </td><td class="markdownTableBodyNone">查询期权标的持仓信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_QueryOptExerciseAssign  </td><td class="markdownTableBodyNone">查询期权行权指派信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_QueryOptPositionLimit  </td><td class="markdownTableBodyNone">查询期权限仓额度信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_QueryOptPurchaseLimit  </td><td class="markdownTableBodyNone">查询期权限购额度信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_QueryOptSettlementStatement  </td><td class="markdownTableBodyNone">查询期权结算单信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_QueryBrokerParamsInfo  </td><td class="markdownTableBodyNone">查询券商参数信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_QueryNotifyInfo  </td><td class="markdownTableBodyNone">查询通知消息   </td></tr>
</table>
</li>
<li>回报消息 (<a class="el" href="../../d2/d87/unionOesRptMsgBodyT.html" title="回报消息的消息体定义 ">OesRptMsgBodyT</a>) 中<ul>
<li>新增 '通知消息 (<a class="el" href="../../d7/dd1/structOesNotifyInfoReportT.html" title="通知消息回报结构体定义 ">OesNotifyInfoReportT</a>)' 回报推送<ul>
<li>对应回报消息类型 '通知消息回报 (OESMSG_RPT_NOTIFY_INFO)'</li>
<li>对应回报消息体 <a class="el" href="../../d2/d87/unionOesRptMsgBodyT.html#a457dc737856aecd458ed6c77fb3da7c1" title="通知消息回报信息 ">OesRptMsgBodyT.notifyInfoRpt</a></li>
</ul>
</li>
<li>新增 '期权标的持仓变动信息 (<a class="el" href="../../d2/df0/structOesOptUnderlyingHoldingReportT.html" title="期权标的持仓回报信息的结构体定义 ">OesOptUnderlyingHoldingReportT</a>)' 回报推送<ul>
<li>对应回报消息类型 '期权标的持仓变动信息回报 (OESMSG_RPT_OPTION_UNDERLYING_HOLDING_VARIATION)'</li>
<li>对应回报消息体 <a class="el" href="../../d2/d87/unionOesRptMsgBodyT.html#ac4baf5c54e9c304e3d6be2336ee71240" title="期权标的持仓变动回报信息 ">OesRptMsgBodyT.optUnderlyingHoldingRpt</a></li>
</ul>
</li>
<li>新增 '期权账户结算单确认 (<a class="el" href="../../d3/d5d/structOesOptSettlementConfirmReportT.html" title="期权结算单确认回报信息的结构体定义 ">OesOptSettlementConfirmReportT</a>)' 回报推送<ul>
<li>对应回报消息类型 '期权账户结算单确认回报 (OESMSG_RPT_OPTION_SETTLEMENT_CONFIRMED)'</li>
<li>对应回报消息体 <a class="el" href="../../d2/d87/unionOesRptMsgBodyT.html#a360a6019ea35d05d6b7a233a12093223" title="期权账户结算单确认回报信息 ">OesRptMsgBodyT.optSettlementConfirmRpt</a></li>
</ul>
</li>
<li>重命名 '资金变动回报信息' 消息的结构体定义 <a class="el" href="../../dd/da9/structOesCashAssetItemT.html" title="客户资金信息内容 ">OesCashAssetItemT</a> =&gt; <a class="el" href="../../dd/d51/structOesCashAssetReportT.html" title="客户资金回报结构体定义 ">OesCashAssetReportT</a><ul>
<li>对应回报消息 <a class="el" href="../../d2/d87/unionOesRptMsgBodyT.html#ac058c31913638c944960de6acbeeb61c" title="资金变动回报信息 ">OesRptMsgBodyT.cashAssetRpt</a></li>
</ul>
</li>
<li>重命名 '持仓变动回报信息 (股票)' 消息的结构体定义 <a class="el" href="../../df/d18/structOesStkHoldingItemT.html" title="查询到的股票持仓信息内容 ">OesStkHoldingItemT</a> =&gt; <a class="el" href="../../dd/d38/structOesStkHoldingReportT.html" title="股票持仓回报结构体定义 ">OesStkHoldingReportT</a><ul>
<li>对应回报消息 <a class="el" href="../../d2/d87/unionOesRptMsgBodyT.html#ac7a25dab5820f383c1e8229c939cd77f" title="持仓变动回报信息 (股票) ">OesRptMsgBodyT.stkHoldingRpt</a></li>
</ul>
</li>
<li>重命名 '持仓变动回报信息 (期权)' 消息的结构体定义 <a class="el" href="../../df/d91/structOesOptHoldingItemT.html" title="查询到的期权持仓信息内容 ">OesOptHoldingItemT</a> =&gt; <a class="el" href="../../de/d1b/structOesOptHoldingReportT.html" title="期权持仓回报结构体定义 ">OesOptHoldingReportT</a><ul>
<li>对应回报消息 <a class="el" href="../../d2/d87/unionOesRptMsgBodyT.html#a9bef0a03c14d52831235748d393aace5" title="持仓变动回报信息 (期权) ">OesRptMsgBodyT.optHoldingRpt</a></li>
</ul>
</li>
</ul>
</li>
<li>资金变动回报和客户资金信息 (<a class="el" href="../../dd/da9/structOesCashAssetItemT.html" title="客户资金信息内容 ">OesCashAssetItemT</a>) 中增加如下字段<ul>
<li>日初持仓占用保证金 (initialMargin)</li>
<li>行权累计待交收冻结资金 (totalExerciseFrzAmt)</li>
<li>待追加保证金 (pendingSupplMargin)</li>
<li>上海市场可用限购/套保额度 (sseAvailablePurchaseLimit)</li>
<li>深圳市场可用限购/套保额度 (szseAvailablePurchaseLimit)</li>
</ul>
</li>
<li>股票持仓信息 (<a class="el" href="../../df/d18/structOesStkHoldingItemT.html" title="查询到的股票持仓信息内容 ">OesStkHoldingItemT</a>) 结构体字段变更<ul>
<li>删除 当前已锁定持仓 (lockHld) 字段</li>
<li>删除 当前锁定冻结持仓 (lockFrzHld) 字段</li>
<li>删除 当前解锁定冻结持仓数量 (unlockFrzHld) 字段</li>
<li>删除 当前备兑冻结的现货持仓数量 (coveredFrzHld) 字段</li>
<li>删除 当前已备兑使用的现货持仓数量 (coveredHld) 字段</li>
<li>新增 日初锁定持仓 (originalLockHld) 字段</li>
<li>新增 日中累计锁定持仓 (totalLockHld) 字段</li>
<li>新增 日中累计解锁持仓 (totalUnlockHld) 字段</li>
<li>新增 日初可用持仓 (originalAvlHld) 字段</li>
</ul>
</li>
<li>委托回报和委托信息 (OesOrdCnfmT/OesOrdItemT) 中增加如下字段<ul>
<li>委托当前冻结的保证金 (frzMargin)</li>
<li>委托累计已使用的保证金 (cumMargin)</li>
</ul>
</li>
<li>成交回报和成交信息 (OesTrdCnfmT/OesTrdItemT) 中增加如下字段<ul>
<li>债券利息 (trdInterest)</li>
<li>交易费用 (trdFee)</li>
<li>占用/释放的保证金 (trdMargin)</li>
<li>累计占用/释放的保证金 (cumMargin)</li>
</ul>
</li>
<li>委托状态 (eOesOrdStatusT) 枚举定义调整<ul>
<li>重命名 OES_ORD_STATUS_UNDEFINE =&gt; OES_ORD_STATUS_PENDING (待处理 (仅内部使用))</li>
</ul>
</li>
<li>新增如下错误码 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">错误码  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1278  </td><td class="markdownTableBodyNone">结算单未确认   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1279  </td><td class="markdownTableBodyNone">结算单重复确认   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1331  </td><td class="markdownTableBodyNone">非法的持仓类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1332  </td><td class="markdownTableBodyNone">合约限制开仓   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1333  </td><td class="markdownTableBodyNone">客户权利仓持仓限额不足   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1334  </td><td class="markdownTableBodyNone">客户总持仓限额不足   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1335  </td><td class="markdownTableBodyNone">客户单日买入开仓限额不足   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1336  </td><td class="markdownTableBodyNone">客户买入额度不足 (限购)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1337  </td><td class="markdownTableBodyNone">券商总持仓限额不足   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1338  </td><td class="markdownTableBodyNone">券商总保证金额度不足   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1339  </td><td class="markdownTableBodyNone">非法的标的锁定指令类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1340  </td><td class="markdownTableBodyNone">禁止买入开仓   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1341  </td><td class="markdownTableBodyNone">禁止卖出平仓   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1342  </td><td class="markdownTableBodyNone">禁止卖出开仓   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1343  </td><td class="markdownTableBodyNone">禁止买入平仓   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1344  </td><td class="markdownTableBodyNone">禁止备兑开仓   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1345  </td><td class="markdownTableBodyNone">禁止备兑平仓   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1346  </td><td class="markdownTableBodyNone">禁止标的锁定   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1347  </td><td class="markdownTableBodyNone">禁止标的解锁   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1348  </td><td class="markdownTableBodyNone">禁止期权行权   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1349  </td><td class="markdownTableBodyNone">非行权日   </td></tr>
</table>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持期权业务</li>
</ol>
<h3>3. 注意事项说明</h3>
<ol type="1">
<li>v0.15.9 及其之前版本API中 OesApi_QueryOptHolding、OesApi_QueryOption、OesApi_QuerySingleOptHolding 已废弃, 需使用 v0.16 版本API进行相关信息的查询</li>
</ol>
<hr/>
<h2>OES_0.15.11.15 / 2020-11-20 </h2>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级</li>
<li>证券子类别枚举(eOesSubSecurityTypeT) 中:<ul>
<li>新增 基础设施基金(OES_SUB_SECURITY_TYPE_FUND_REITS)</li>
</ul>
</li>
<li>股东账户交易权限枚举(eOesTradingPermissionT) 中:<ul>
<li>字段重命名 基础设施基金交易权限(OES_PERMIS_INFRASTRUCTURE_FUND =&gt; OES_PERMIS_REITS)</li>
</ul>
</li>
<li>证券属性枚举(eOesSecurityAttributeT) 中:<ul>
<li>删除 基础设施基金(OES_SECURITY_ATTR_INFRASTRUCTURE_FUND)</li>
</ul>
</li>
<li>重命名错误码的宏定义<ul>
<li>1290, 股东账户没有交易基础设施基金的权限 (OESERR_NO_INFRASTRUCTURE_FUND_PERM =&gt; OESERR_NO_REITS_PERM)</li>
</ul>
</li>
<li>增加辅助接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_GetClientType  </td><td class="markdownTableBodyNone">返回通道对应的客户端类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_GetClientStatus  </td><td class="markdownTableBodyNone">返回通道对应的客户端状态   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_GetBusinessType  </td><td class="markdownTableBodyNone">返回通道对应的业务类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_IsBusinessSupported  </td><td class="markdownTableBodyNone">返回系统是否支持指定的业务类别   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_SetRetainExtDataAble  </td><td class="markdownTableBodyNone">设置是否保留(不清空)由应用层自定义使用的扩展存储空间数据 (__extData)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_IsRetainExtDataAble  </td><td class="markdownTableBodyNone">返回是否保留(不清空)由应用层自定义使用的扩展存储空间数据   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_SetThreadBusinessType  </td><td class="markdownTableBodyNone">设置当前线程登录OES时所期望对接的业务类型 (正常情况下无需调用)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_GetThreadBusinessType  </td><td class="markdownTableBodyNone">返回当前线程登录OES时所期望对接的业务类型   </td></tr>
</table>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>完善对深交所基础设施基金产品交易的支持</li>
<li>其它细节完善和优化 <hr/>
</li>
</ol>
<h2>OES_0.15.11.12 / 2020-09-30 </h2>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级</li>
<li>'客户端总览信息 (<a class="el" href="../../d8/da6/structOesClientOverviewT.html" title="客户端总览信息内容 ">OesClientOverviewT</a>)' 中新增如下字段<ul>
<li>新增 最大委托笔数限制 (maxOrdCount) 字段</li>
</ul>
</li>
<li>新增 证券属性定义(eOesSecurityAttributeT) 枚举类型</li>
<li>股东账户交易权限枚举(eOesTradingPermissionT)中新增:<ul>
<li>可转换公司债券交易权限 (OES_PERMIS_CONVERTIBLE_BOND)</li>
<li>基础设施基金交易权限 (OES_PERMIS_INFRASTRUCTURE_FUND)</li>
</ul>
</li>
<li>'现货产品基础信息 (<a class="el" href="../../d7/d79/structOesStockBaseInfoT.html" title="现货产品基础信息的结构体定义 ">OesStockBaseInfoT</a>)' 中启用 证券属性 (securityAttribute) 字段</li>
<li>'证券发行基础信息(OesIssueBaseInfoT)' 中启用 证券属性 (securityAttribute) 字段</li>
<li>调整错误码<ul>
<li>新增 '1289, 股东账户没有交易可转换公司债券的权限'</li>
<li>新增 '1290, 股东账户没有交易基础设施基金的权限'</li>
</ul>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>新增事中风控处理<ul>
<li>风控规则1: 客户最大委托笔数限制, 触发后客户被限制开仓</li>
<li>风控规则2: 营业部委托流水号限制, 触发后营业部所有客户被限制开仓</li>
</ul>
</li>
<li>支持可转换公司债券的适当性检查</li>
<li>支持上交所科创板ETF和科创板LOF产品的交易</li>
<li>支持深交所基础设施基金产品的交易及适当性检查</li>
<li>其它细节完善和优化</li>
</ol>
<hr/>
<h2>OES_0.15.11.6 / 2020-07-23 </h2>
<ol type="1">
<li>该版本是 v015.11.4 的BUG修复版本, 建议升级到该版本</li>
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级 (建议升级)<ul>
<li>如果使用到了时间戳字段下的微秒时间, 则需要升级最新的API, 因为时间戳字段已全部升级为纳秒级时间戳。具体请参见 v0.15.11.4 版本的更新说明</li>
</ul>
</li>
<li>fix: 完备Windows平台下的WSACleanup资源释放处理，避免额外调用WSACleanup导致外部系统的网络操作异常</li>
<li>fix: 修复Win64下不能正确获取纳秒级时间戳的问题</li>
<li>fix: 修复MinGW下 struct timespec 结构体未按64位对齐的问题</li>
<li>为异步API增加用于返回尚未被处理的剩余数据数量的辅助接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesAsyncApi_GetAsyncQueueTotalCount  </td><td class="markdownTableBodyNone">返回异步API累计已入队的消息数量   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesAsyncApi_GetAsyncQueueRemainingCount  </td><td class="markdownTableBodyNone">返回队列中尚未被处理的剩余数据数量   </td></tr>
</table>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>创业板注册制业务的细节调整</li>
<li>完善系统在异常场景下24小时持续运行的可靠性</li>
<li>其它细节完善和优化</li>
</ol>
<hr/>
<h2>OES_0.15.11.4 / 2020-07-07 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级 (建议升级以支持创业板注册制改革的相关内容)<ul>
<li>如果使用到了时间戳字段下的微秒时间, 则需要升级最新的API, 因为时间戳字段已全部升级为纳秒级时间戳。具体请参见注意事项说明</li>
</ul>
</li>
<li>fix: 修复在Win32下因为对齐问题导致指针位置不正确的BUG (正常不会触发, 只有在启用异步API的异步回调处理时才会触发)</li>
<li>异步API新增如下接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesAsyncApi_SendReportSynchronization  </td><td class="markdownTableBodyNone">发送回报同步消息接口   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesAsyncApi_IsAllTerminated  </td><td class="markdownTableBodyNone">检查所有线程是否均已安全退出   </td></tr>
</table>
</li>
<li>同步API新增如下接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_GetChannelGroupLastRecvTime  </td><td class="markdownTableBodyNone">返回通道组最近接收消息时间   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_GetChannelGroupLastSendTime  </td><td class="markdownTableBodyNone">返回通道组最近发送消息时间   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_HasStockStatus  </td><td class="markdownTableBodyNone">返回现货产品是否具有指定状态   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">__OesApi_CheckApiVersion  </td><td class="markdownTableBodyNone">检查API版本是否匹配 (检查API头文件和库文件的版本是否匹配)   </td></tr>
</table>
</li>
<li>为支持创业板注册制改革, 现货产品信息 (OesStockItemT) 中新增如下字段: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">字段  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isRegistration  </td><td class="markdownTableBodyNone">是否注册制   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">securityStatus  </td><td class="markdownTableBodyNone">证券状态   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">securityAttribute  </td><td class="markdownTableBodyNone">证券属性 (保留字段)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isCrdMarginTradeUnderlying  </td><td class="markdownTableBodyNone">是否为融资标的   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isCrdShortSellUnderlying  </td><td class="markdownTableBodyNone">是否为融券标的   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isCrdCollateral  </td><td class="markdownTableBodyNone">是否为融资融券担保品   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isNoProfit  </td><td class="markdownTableBodyNone">是否尚未盈利   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isWeightedVotingRights  </td><td class="markdownTableBodyNone">是否存在投票权差异   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isVie  </td><td class="markdownTableBodyNone">是否具有协议控制框架   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">lmtBuyQtyUnit  </td><td class="markdownTableBodyNone">限价买入单位 (重命名 buyQtyUnit)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">lmtSellQtyUnit  </td><td class="markdownTableBodyNone">限价卖出单位 (重命名 sellQtyUnit)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">mktBuyQtyUnit  </td><td class="markdownTableBodyNone">市价买入单位   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">mktSellQtyUnit  </td><td class="markdownTableBodyNone">市价卖出单位   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">parValue  </td><td class="markdownTableBodyNone">面值 (重命名 parPrice)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">auctionLimitType  </td><td class="markdownTableBodyNone">连续交易时段的有效竞价范围限制类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">auctionReferPriceType  </td><td class="markdownTableBodyNone">连续交易时段的有效竞价范围基准价类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">auctionUpDownRange  </td><td class="markdownTableBodyNone">连续交易时段的有效竞价范围涨跌幅度   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">listDate  </td><td class="markdownTableBodyNone">上市日期   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">maturityDate  </td><td class="markdownTableBodyNone">到期日期 (仅适用于债券等有发行期限的产品)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">underlyingSecurityId  </td><td class="markdownTableBodyNone">基础证券代码   </td></tr>
</table>
</li>
<li>为支持创业板注册制改革, 证券发行信息 (OesIssueItemT) 中新增如下字段: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">字段  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isRegistration  </td><td class="markdownTableBodyNone">是否注册制   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">securityAttribute  </td><td class="markdownTableBodyNone">证券属性 (保留字段)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isNoProfit  </td><td class="markdownTableBodyNone">是否尚未盈利   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isWeightedVotingRights  </td><td class="markdownTableBodyNone">是否存在投票权差异   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">isVie  </td><td class="markdownTableBodyNone">是否具有协议控制框架   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">alotRecordDay  </td><td class="markdownTableBodyNone">配股股权登记日   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">alotExRightsDay  </td><td class="markdownTableBodyNone">配股股权除权日   </td></tr>
</table>
</li>
<li>查询ETF成份证券信息接口调整<ul>
<li>查询过滤条件 (<a class="el" href="../../df/d52/structOesQryEtfComponentFilterT.html" title="查询ETF成份证券信息过滤条件 ">OesQryEtfComponentFilterT</a>) 中:<ul>
<li>查询条件 ETF基金申赎代码 (fundId) 字段不再是必填项</li>
<li>新增查询条件 ETF基金市场代码 (fundMktId) 字段</li>
</ul>
</li>
<li>ETF成份证券信息 (<a class="el" href="../../db/db9/structOesEtfComponentItemT.html" title="ETF基金成份证券信息内容 ">OesEtfComponentItemT</a>) 中新增如下字段: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">字段  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">fundMktId  </td><td class="markdownTableBodyNone">ETF基金市场代码   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">isTrdComponent  </td><td class="markdownTableBodyNone">是否是作为申赎对价的成份证券   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">discountRatio  </td><td class="markdownTableBodyNone">赎回折价比例   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">securityName  </td><td class="markdownTableBodyNone">成份证券名称   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">premiumRatio  </td><td class="markdownTableBodyNone">申购溢价比例 (重命名 premiumRate)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">redemptionSubCash  </td><td class="markdownTableBodyNone">赎回替代金额 (重命名 redemptionCashSub)   </td></tr>
</table>
</li>
</ul>
</li>
<li>新增证券子类型<ul>
<li>创业板存托凭证 (OES_SUB_SECURITY_TYPE_STOCK_GEMCDR)</li>
<li>可交换债券 (OES_SUB_SECURITY_TYPE_BOND_EXG)</li>
<li>商品期货ETF (OES_SUB_SECURITY_TYPE_ETF_COMMODITY_FUTURES)</li>
</ul>
</li>
<li>调整买卖类型 (eOesBuySellTypeT) 定义:<ul>
<li>重命名 质押式逆回购 (OES_BS_TYPE_CREDIT_SELL =&gt; OES_BS_TYPE_REVERSE_REPO)</li>
<li>废弃 OES_BS_TYPE_CREDIT_SELL (融资买入或质押式逆回购)</li>
<li>废弃 OES_BS_TYPE_CREDIT_BUY (融资买入)</li>
</ul>
</li>
<li>股东账户交易权限枚举(eOesTradingPermissionT)中新增:<ul>
<li>商品期货ETF申赎权限 (OES_PERMIS_COMMODITY_FUTURES_ETF)</li>
</ul>
</li>
<li>删除已经过时的期权相关查询接口和结构体定义, 包括:<ul>
<li>删除接口<ul>
<li>查询单条期权持仓信息 (OesApi_QuerySingleOptHolding)</li>
<li>查询期权持仓信息 (OesApi_QueryOptHolding)</li>
<li>查询期权产品信息 (OesApi_QueryOption)</li>
</ul>
</li>
<li>删除结构体<ul>
<li>期权合约结构体 (OesOptionItemT)</li>
<li>期权持仓结构体 (<a class="el" href="../../df/d91/structOesOptHoldingItemT.html" title="查询到的期权持仓信息内容 ">OesOptHoldingItemT</a>)</li>
</ul>
</li>
<li>从0.16版本开始正式支持期权业务</li>
</ul>
</li>
<li>优化异步API<ul>
<li>为异步API增加是否优先使用大页内存来创建异步队列的配置项</li>
<li>为异步API的I/O线程增加追加模式输出的配置项</li>
<li>为异步API的I/O线程增加支持忙等待的配置选项，以使异步队列的延迟统计结果更接近实际情况</li>
<li>'异步修改客户端密码 (OesAsyncApi_SendChangePasswordReq)' 接口中删除多余的应答参数</li>
</ul>
</li>
<li>优化时间戳精度, 将系统下的时间戳全部升级为纳秒级时间戳, 以提高时延统计的精度<ul>
<li>时间戳字段的数据类型从 STimevalT/STimeval32T 变更为 STimespecT/STimespec32T</li>
<li>协议保持兼容, 但如果使用到了时间戳字段下的微秒时间(tv_usec 字段), 则需要修改为纳秒时间(tv_nsec 字段), 否则会因为时间单位的调整而导致时延计算错误</li>
</ul>
</li>
<li>API中添加vs2015工程样例</li>
<li>调整错误码<ul>
<li>删除 '1242, 出入金笔数超过限制'</li>
<li>调整描述内容 '1249, 不支持市价委托或账户无市价委托的交易权限'</li>
<li>调整描述内容 '1258, 股东账户没有交易货币ETF的权限'</li>
<li>调整描述内容 '1250, 股东账户没有交易创业板核准制证券的权限'</li>
<li>新增 '1285, 股东账户没有交易债券ETF的权限'</li>
<li>新增 '1286, 股东账户没有交易黄金ETF的权限'</li>
<li>新增 '1287, 股东账户没有交易商品期货ETF的权限'</li>
<li>新增 '1288, 股东账户没有交易创业板注册制证券的权限'</li>
</ul>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持创业板注册制改革</li>
<li>上海市场风险警示(ST/*ST)证券和退市整理证券不再支持市价买卖</li>
<li>其它细节完善和性能优化</li>
</ol>
<h3>3. 注意事项说明</h3>
<ol type="1">
<li>时间戳精度的修改没法完全兼容之前的API, 如果使用到了时间戳字段下的微秒时间(tv_usec 字段), 则需要升级API到最新版本<ul>
<li>通常只有在统计延迟时才会使用到微秒时间(tv_usec)字段, 如果使用到了该字段, 则需要改为使用纳秒时间(tv_nsec)字段, 否则会因为时间单位的调整而导致时延计算错误</li>
<li>升级API以后, 可以通过检查有无编译错误的方式, 来检查是否使用到了 tv_usec 字段。如果没有编译错误就无需再做额外的调整</li>
</ul>
</li>
<li>查询ETF成份证券信息接口的行为有如下变化:<ul>
<li>查询过滤条件中的 fundId 字段不再是必填项<ul>
<li>查询过滤条件如中不填写 fundId 字段, 查询结果会返回所有成份证券信息。 客户端需要通过返回内容中的 fundId 来判断该成份证券属于哪支ETF。</li>
</ul>
</li>
<li>对于深圳跨市场ETF，返回内容将包括其上海成份证券信息<ul>
<li>对深交所跨市场ETF进行申赎时应使用 159900 虚拟成份券进行沪市成份证券份额的现金替代处理, 深圳跨市场ETF中的上海成份证券信息仅作参考使用。</li>
<li>如需过滤深圳跨市场ETF中的上海成份证券信息, 可通过 '是否是作为申赎对价的成份证券 (isTrdComponent)' 字段来判断。 对于深圳跨市场ETF中的上海成份证券, 该字段取值为0。</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr/>
<h2>OES_0.15.10.5 / 2020-04-07 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级 (建议升级)</li>
<li>fix: 为API增加对SIGPIPE信号的屏蔽处理，以避免连接断开以后重复send导致程序异常退出</li>
<li>增加异步API接口, 以支持异步回报处理和连接管理<ul>
<li>支持异步接收回报数据</li>
<li>支持自动的连接管理 (自动识别异常并重建连接)</li>
<li>支持异步数据落地和延迟统计 (可以通过配置文件进行控制, 默认为禁用)</li>
<li>主要接口:<ul>
<li>OesAsyncApi_CreateContext</li>
<li>OesAsyncApi_AddChannel</li>
<li>OesAsyncApi_Start</li>
<li>OesAsyncApi_Stop</li>
<li>OesAsyncApi_ReleaseContext</li>
</ul>
</li>
<li>样例代码参见:<ul>
<li>oes_api/samples/oes_sample/c_sample/03_oes_async_api_sample.c</li>
</ul>
</li>
</ul>
</li>
<li>重构C++样例代码, 改为基于异步API实现, 增加如下特性:<ul>
<li>支持自动的连接管理 (自动识别异常并重建连接)</li>
<li>增加和完善了 OnConnected/OnDisconnected 回调接口 (客户端可以不用实现这两个接口, 采用默认实现即可)</li>
<li>样例代码及更新说明参见:<ul>
<li>oes_api/samples/oes_sample/cpp_sample/oes_client_sample.h</li>
</ul>
</li>
</ul>
</li>
<li>调整示例代码的目录位置</li>
<li>'股票持仓基础信息 (<a class="el" href="../../d8/d84/structOesStkHoldingBaseInfoT.html" title="股票持仓基础信息的结构体定义 ">OesStkHoldingBaseInfoT</a>)' 如下字段变更<ul>
<li>删除 当前已锁定持仓 (lockHld) 字段</li>
<li>删除 当前锁定冻结持仓 (lockFrzHld) 字段</li>
<li>删除 当前解锁定冻结持仓数量 (unlockFrzHld) 字段</li>
<li>删除 当前备兑冻结的现货持仓数量 (coveredFrzHld) 字段</li>
<li>删除 当前已备兑使用的现货持仓数量 (coveredHld) 字段</li>
<li>新增 日初可用持仓 (originalAvlHld) 字段</li>
<li>新增 日初锁定持仓 (originalLockHld) 字段</li>
<li>新增 日中累计锁定持仓 (totalLockHld) 字段</li>
<li>新增 日中累计解锁持仓 (totalUnlockHld) 字段</li>
<li>新增 当日最大可减持额度 (maxReduceQuota) 字段</li>
</ul>
</li>
<li>'客户端总览信息 (<a class="el" href="../../d8/da6/structOesClientOverviewT.html" title="客户端总览信息内容 ">OesClientOverviewT</a>)' 中新增如下字段<ul>
<li>新增 客户端适用的业务范围 (businessScope) 字段</li>
</ul>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持深证增发业务</li>
<li>支持大股东减持控制</li>
<li>⽀持上证ETF业务改造</li>
<li>其它细节完善和性能优化</li>
</ol>
<h3>3. 注意事项说明</h3>
<ol type="1">
<li>C++样例代码发生了如下变化, 请参考更新说明进行升级处理:<ul>
<li>删除以下连接重建相关的接口, 不再需要显式的重建连接<ul>
<li>ReconnectOrdChannel</li>
<li>ReconnectRptChannel</li>
<li>ReconnectQryChannel</li>
<li>SendReportSynchronization</li>
</ul>
</li>
<li>删除或重名以下公有成员变量<ul>
<li>删除 apiEnv</li>
<li>重命名 apiCfg =&gt; _apiCfg</li>
</ul>
</li>
<li>简化和废弃了 Start 方法的参数, 具体描述参见 Start 方法的函数注释</li>
</ul>
</li>
</ol>
<hr/>
<h2>OES_0.15.9.4 / 2019-12-24 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>API新增如下接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_IsErrorOf  </td><td class="markdownTableBodyNone">判断错误码与错误信息条目是否匹配   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_IsErrorOf2  </td><td class="markdownTableBodyNone">判断消息头中的状态码与错误信息条目是否匹配   </td></tr>
</table>
</li>
<li>现货产品信息 (OesStockItemT) 中增加如下字段<ul>
<li>新增 总股本 (outstandingShare) 字段</li>
<li>新增 流通股数量 (publicFloatShare) 字段</li>
</ul>
</li>
<li>证券账户信息 (<a class="el" href="../../db/d02/structOesInvAcctItemT.html" title="证券账户内容 ">OesInvAcctItemT</a>) 中增加如下字段<ul>
<li>新增 个股持仓比例阀值 (stkPositionLimitRatio) 字段</li>
</ul>
</li>
<li>证券发行信息 (OesIssueBaseInfoT/OesIssueItemT) 中新增字段:<ul>
<li>停牌标识 (suspFlag)</li>
<li>发行方式 (issueType)</li>
</ul>
</li>
<li>新增错误码 1276、1277 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">错误码  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1276  </td><td class="markdownTableBodyNone">个股持仓比例超过限制   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1277  </td><td class="markdownTableBodyNone">营业部委托流水号超出有效范围   </td></tr>
</table>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持上证增发业务</li>
<li>其它细节完善</li>
</ol>
<hr/>
<h2>OES_0.15.9.1 / 2019-08-16 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>API新增如下接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_QueryBrokerParamsInfo  </td><td class="markdownTableBodyNone">查询券商参数信息   </td></tr>
</table>
</li>
<li>替换头文件中使用的 likely/unlikely 关键字, 以避免与第三方库的同名函数冲突<ul>
<li>若编译时提示 likely 与 boost 库中的函数名称冲突, 可以通过指定宏 __NO_SHORT_LIKELY 来解决</li>
</ul>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持两地交易 (同一个客户账号可以分别托管到上海、深圳机房就近交易，并支持实时资金划转)</li>
<li>支持沪伦通业务</li>
<li>其它细节完善</li>
</ol>
<hr/>
<h2>OES_0.15.9_u4 / 2019-12-03 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>证券发行信息 (OesIssueBaseInfoT/OesIssueItemT) 中新增字段:<ul>
<li>停牌标识 (suspFlag)</li>
<li>发行方式 (issueType)</li>
</ul>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持上证增发业务</li>
</ol>
<hr/>
<h2>OES_0.15.9 / 2019-05-31 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级 (建议升级, 以支持科创版业务)</li>
<li>fix: 修复API无法支持取值大于1024的文件描述符的问题</li>
<li>新增证券子类型<ul>
<li>科创板股票 (OES_SUB_SECURITY_TYPE_STOCK_KSH)</li>
<li>科创板存托凭证 (OES_SUB_SECURITY_TYPE_STOCK_KCDR)</li>
<li>沪伦通CDR (OES_SUB_SECURITY_TYPE_STOCK_HLTCDR)</li>
</ul>
</li>
<li>新增配股认购对应的买卖类型 OES_BS_TYPE_ALLOTMENT, 以支持配股业务</li>
<li>新增产品类型属性的定义, 并在如下结构中体现:<ul>
<li>证券信息 (OesStockBaseInfoT/OesStockItemT)</li>
<li>证券发行信息 (OesIssueBaseInfoT/OesIssueItemT)</li>
<li>股票持仓信息 (OesStkHoldingBaseInfoT/OesStkHoldingItemT)</li>
<li>委托回报 (OesOrdCnfmT/OesOrdItemT)</li>
<li>成交回报 (OesTrdCnfmT/OesTrdItemT)</li>
<li>证券发行信息查询接口(OesApi_QueryIssue)的过滤条件</li>
<li>股票持仓信息查询接口(OesApi_QueryStkHolding)的过滤条件</li>
</ul>
</li>
<li>为了支持科创板, 扩展以下数据结构以及相应的查询结果 (兼容之前版本的API)<ul>
<li>证券账户基础信息 (<a class="el" href="../../d8/dcb/structOesInvAcctBaseInfoT.html" title="证券账户基础信息的结构体定义 ">OesInvAcctBaseInfoT</a>, <a class="el" href="../../db/d02/structOesInvAcctItemT.html" title="证券账户内容 ">OesInvAcctItemT</a>) 中增加如下字段:<ul>
<li>科创板权益 (kcSubscriptionQuota)</li>
</ul>
</li>
<li>现货产品基础信息 (<a class="el" href="../../d7/d79/structOesStockBaseInfoT.html" title="现货产品基础信息的结构体定义 ">OesStockBaseInfoT</a>, OesStockItemT) 中增加如下字段:<ul>
<li>限价买数量上限 (lmtBuyMaxQty)</li>
<li>限价买数量下限 (lmtBuyMinQty)</li>
<li>限价卖数量上限 (lmtSellMaxQty)</li>
<li>限价卖数量下限 (lmtSellMinQty)</li>
<li>市价买数量上限 (mktBuyMaxQty)</li>
<li>市价买数量下限 (mktBuyMinQty)</li>
<li>市价卖数量上限 (mktSellMaxQty)</li>
<li>市价卖数量下限 (mktSellMinQty)</li>
</ul>
</li>
<li>客户端总览信息中的股东账户总览 (<a class="el" href="../../d6/d91/structOesInvAcctOverviewT.html" title="股东账户总览信息内容 ">OesInvAcctOverviewT</a>) 中增加如下字段:<ul>
<li>科创板权益 (kcSubscriptionQuota)</li>
</ul>
</li>
</ul>
</li>
<li>重构涨跌停价格、价格档位字段命名, 为这些字段增加新的别名 (兼容之前版本的API)<ul>
<li>ceilPrice =&gt; upperLimitPrice</li>
<li>floorPrice =&gt; lowerLimitPrice</li>
<li>priceUnit =&gt; priceTick</li>
</ul>
</li>
<li>调整上证委托类型 (eOesOrdTypeShT)<ul>
<li>增加 '对手方最优价格申报 (OES_ORD_TYPE_SH_MTL_BEST)' 类型 (仅适用于科创板)</li>
<li>增加 '本方最优价格申报 (OES_ORD_TYPE_SH_MTL_SAMEPATY_BEST)' 类型 (仅适用于科创板)</li>
</ul>
</li>
<li>股东账户交易权限枚举(eOesTradingPermissionT)中新增<ul>
<li>科创板交易权限 (OES_PERMIS_KSH)</li>
</ul>
</li>
<li>新增错误码1035、1036、1274、1275, 调整错误码1007、1022的描述信息 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">错误码  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1007  </td><td class="markdownTableBodyNone">非服务开放时间   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1022  </td><td class="markdownTableBodyNone">尚不支持或尚未开通此业务   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1035  </td><td class="markdownTableBodyNone">非法的产品类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1036  </td><td class="markdownTableBodyNone">未通过黑白名单检查   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1274  </td><td class="markdownTableBodyNone">股东账户没有交易沪伦通存托凭证的权限   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1275  </td><td class="markdownTableBodyNone">股东账户没有交易科创板的权限   </td></tr>
</table>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持配股申购业务</li>
<li>支持对客户设置禁止买入和限制卖出某支证券</li>
<li>支持逆回购闭市时间延后到15:30</li>
<li>支持科创板业务</li>
<li>修复其他系统缺陷, 完善安全机制</li>
</ol>
<h3>3. 科创板市价委托保护限价说明</h3>
<ol type="1">
<li>在进行科创板市价委托交易时, 保护限价填在委托请求中的ordPrice字段内 (对于主板的市价委托, 委托请求中的ordPrice字段无意义)</li>
<li>对于上市前五日、无涨跌幅限制的科创板证券, 市价委托的保护限价必填, 且保护限价需符合价格变动单位</li>
<li>对于上市五日后、有涨跌幅限制的科创板证券, 市价委托的保护限价可填写有效值或者0<ul>
<li>对于市价买委托, 委托请求中ordPrice填0将使用涨停价作为其保护限价</li>
<li>对于市价卖委托, 委托请求中ordPrice填0将使用跌停价作为其保护限价</li>
</ul>
</li>
<li>对于有涨跌幅限制的科创板证券:<ul>
<li>当市价买委托的保护限价高于涨停价时, 将使用涨停价冻结交易资金, 委托正常处理</li>
<li>当市价买委托的保护限价低于涨停价时, 将使用保护限价冻结交易资金</li>
<li>当市价买委托的保护限价低于跌停价时, 委托将被拒绝</li>
<li>当市价卖委托的保护限价低于跌停价时, 委托正常处理</li>
<li>当市价卖委托的保护限价高于涨停价时, 委托将被拒绝</li>
</ul>
</li>
</ol>
<hr/>
<h2>OES_0.15.7.4 / 2018-09-28 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API，客户可以选择不升级 (建议升级)</li>
<li>fix: 修复当多个线程同时初始化API日志时, 会导致日志信息重复输出的问题</li>
<li>API新增如下接口 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_SendBatchOrdersReq  </td><td class="markdownTableBodyNone">批量委托   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_SendBatchOrdersReq2  </td><td class="markdownTableBodyNone">批量委托   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_SendChangePasswordReq  </td><td class="markdownTableBodyNone">修改客户端登录密码，仅支持15:00之后修改   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_SetLastError  </td><td class="markdownTableBodyNone">设置当前线程的API错误号   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_GetLastError  </td><td class="markdownTableBodyNone">获取当前线程最近一次API调用失败的错误号   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_SetCustomizedDriverId  </td><td class="markdownTableBodyNone">获取已设置的设备序列号   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_GetCustomizedDriverId  </td><td class="markdownTableBodyNone">设置设备序列号   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_GetClientOverview  </td><td class="markdownTableBodyNone">获取客户端总览信息   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_QueryCounterCash  </td><td class="markdownTableBodyNone">查询主柜资金信息(仅支持部分主柜台)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_QueryMarketState  </td><td class="markdownTableBodyNone">查询市场状态(目前仅能获取到深圳市场状态)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_HasMoreCachedData  </td><td class="markdownTableBodyNone">获取回报通道中尚未被回调函数处理的缓存数据长度   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_SetThreadUsername  </td><td class="markdownTableBodyNone">设置当前线程的登录用户名   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OesApi_SetThreadPassword  </td><td class="markdownTableBodyNone">设置当前线程的登录密码   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">OesApi_SetThreadEnvId  </td><td class="markdownTableBodyNone">设置当前线程的客户端环境号   </td></tr>
</table>
</li>
<li>回报通道新增一类推送消息: 市场状态推送(目前仅推送深圳市场的状态)，默认订阅条件不会订阅此消息</li>
<li>新增存托凭证对应的证券子类别 OES_SUB_SECURITY_TYPE_STOCK_CDR</li>
<li>回报的消息头结构(OesRptMsgHeadT)中增加 execType 字段，用于表明回报执行类型(参考eOesExecTypeT定义)。</li>
<li>查询证券信息接口(OesApi_QueryStock)中新增过滤条件“证券类别”、“证券子类别”</li>
<li>查询委托接口(OesApi_QueryOrder)中新增过滤条件“证券类别”、“买卖类型”</li>
<li>查询成交接口(OesApi_QueryTrade)中新增过滤条件“证券类别”、“买卖类型”</li>
<li>查询股票持仓接口(OesApi_QueryStkHolding)中新增过滤条件“证券类别”</li>
<li>调整出入金委托请求接口, 支持银行和主柜之间的银证转账</li>
<li>客户资金信息中增加是否禁止出入金的标识</li>
<li>客户股东信息中增加是否禁止交易的标识</li>
<li>成交信息中增加证券子类型、原始委托数量、原始委托价格</li>
<li>新增部分错误码 <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">错误码  </th><th class="markdownTableHeadNone">描述   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1029  </td><td class="markdownTableBodyNone">密码未改变   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1030  </td><td class="markdownTableBodyNone">非法的来源分类   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1031  </td><td class="markdownTableBodyNone">非法的加密类型   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1032  </td><td class="markdownTableBodyNone">非法的客户端设备序列号   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1033  </td><td class="markdownTableBodyNone">无可用节点   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1271  </td><td class="markdownTableBodyNone">股东账户没有交易存托凭证的权限   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1272  </td><td class="markdownTableBodyNone">股东账户没有交易创新企业股票的权限   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1273  </td><td class="markdownTableBodyNone">非法的出入金转账类型   </td></tr>
</table>
</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持修改密码</li>
<li>支持批量委托</li>
<li>支持CDR交易、创新企业股票交易</li>
<li>在监控管理端新增应急撤单功能</li>
<li>系统增加盘前开工和盘后收工操作。开工前（9:00）可以查询数据，但不受理交易和出入金。收工后（15:10）不受理交易，但可以执行出入金、修改密码和查询数据。</li>
<li>修复系统缺陷，完善管理功能和故障恢复处理</li>
</ol>
<hr/>
<h2>OES_0.15.5.16 / 2018-09-28 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级 (建议升级)</li>
<li>fix: 修复当多个线程同时初始化API日志时, 会导致日志信息重复输出的问题</li>
<li>增加 OesApi_HasMoreCachedData 接口, 用于返回已经接收到但尚未被回调函数处理的缓存数据长度</li>
<li>增加 OesApi_GetLastError 接口, 用于返回最近一次API调用失败的错误号</li>
<li>增加 OesApi_QueryCounterCash 接口, 用于查询主柜的资金信息 (仅支持部分主柜)</li>
<li>增加 OesApi_GetClientOverview 接口, 用于查询客户端总览信息</li>
<li>增加设置当前线程登录用户名/登录密码/客户端环境号的接口</li>
<li>查询现货产品信息接口的过滤条件中新增证券类型、证券子类型的过滤条件</li>
<li>调整出入金委托请求接口, 支持银行和主柜之间的银证转账</li>
<li>客户资金信息中增加是否禁止出入金的标识</li>
<li>客户股东信息中增加是否禁止交易的标识</li>
<li>成交信息中增加证券子类型、原始委托数量、原始委托价格</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>支持CDR交易、创新企业股票交易</li>
<li>新增监控管理端的应急撤单功能</li>
<li>修复系统缺陷, 完善管理功能和故障恢复处理</li>
</ol>
<hr/>
<h2>OES_0.15.5.11 / 2018-06-20 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>API没有变化</li>
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级 (建议升级)</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>修复系统缺陷</li>
<li>完善容错处理</li>
<li>其它功能性更新</li>
</ol>
<hr/>
<h2>OES_0.15.5.4 / 2018-02-22 </h2>
<h3>1. API更新概要</h3>
<ol type="1">
<li>服务端兼容 v0.15.5.1 版本API, 客户可以选择不升级</li>
<li>fix: 解决在Windows下的兼容性问题</li>
<li>fix: 修正注释信息中的错误 ('佣金查询结果 (<a class="el" href="../../d7/d0c/structOesCommissionRateItemT.html" title="客户佣金信息内容定义 ">OesCommissionRateItemT</a>)' 中 feeRate 字段精度描述不正确)</li>
<li>API将优先使用自动获取到的ip/mac信息，只有自动获取到的ip/mac信息非法时，才会使用客户自设的ip/mac</li>
<li>修正ETF产品信息中的字段拼写错误 (preTrdaingDay =&gt; preTradingDay)</li>
<li>增加 OesApi_GetLastRecvTime、OesApi_GetLastSendTime 接口, 用于获取通道最新发送/接受消息的时间</li>
<li>登录失败时, 可以通过 errno/SPK_GET_ERRNO() 获取到具体失败原因</li>
</ol>
<h3>2. 服务端更新概要</h3>
<ol type="1">
<li>fix: 优化回报推送，改善推送服务的公平性</li>
<li>fix: 修复在委托确认时没有回填 exchOrdId 的问题</li>
<li>服务端将拒绝来自本地回环地址以及非法IP/MAC地址的登录</li>
</ol>
<hr/>
<h2>OES_0.15.5 / 2017-11-12 </h2>
<h3>1. 更新概要</h3>
<ol type="1">
<li>API中增加客户端环境号(clEnvId)，不同客户端环境号(clEnvId)下的委托顺序号(clSeqNo)序列互不影响</li>
<li>增加独立的撤单接口，支持通过 clEnvId+clSeqNo 进行撤单</li>
<li>回报通道支持消息订阅功能，默认情况下订阅所有类型的回报消息</li>
<li>回报消息新增两类：资金变动通知、持仓变动通知</li>
<li>撤单委托执行成功后，补充被撤委托的状态推送</li>
<li>查询接口回调方法类型定义调整，查询回调接口中增加 isEnd 标志</li>
<li>持仓信息中增加持仓成本相关字段，将影响持仓查询返回结构和持仓变动通知结构</li>
<li>API退出时在日志中输出延迟统计信息</li>
</ol>
<h3>2. 详细更新内容</h3>
<h4>2.1 API中增加客户端环境号(clEnvId)</h4>
<ul>
<li>clEnvId 是客户端环境号，用于区分不同客户端实例上报的委托。即可以为每个客户端实例分配不同的 clEnvId，这样这些客户端实例就可以各自维护自己的 clSeqNo 而不会相互干扰</li>
<li>不同客户端实例可以使用同一 clEnvId 登录服务端。此时这些使用了同一 clEnvId 的客户端实例共享同一个 clSeqNo 序列</li>
<li>clEnvId 客户端的取值范围是 <b>[0~99]</b> ([100~127] 为保留区间，客户端应避免使用)</li>
<li>可以通过 <a class="el" href="../../d7/d0a/oes__api_8h.html#a0d8ef351bcb5ab1c4eb2b317807b8888" title="返回通道对应的客户端环境号 (clEnvId) ">OesApi_GetClEnvId()</a> 接口获得本客户端实例绑定的 clEnvId</li>
<li>服务端维护的委托信息中，会记录发送此委托的源客户端实例所绑定的 clEnvId。委托回报消息(<a class="el" href="../../df/dc7/structOesOrdCnfmT.html#a31e5f8d0caf9459b730b9a83e54dcc9f" title="客户端环境号 ">OesOrdCnfmT.clEnvId</a>) 和 委托查询应答(<a class="el" href="../../df/dc7/structOesOrdCnfmT.html#a31e5f8d0caf9459b730b9a83e54dcc9f" title="客户端环境号 ">OesOrdItemT.clEnvId</a>) 会携带此信息</li>
<li>配置文件相关设置请参考 oes_client_sample.conf 中 [oes_client].clEnvId 参数的设置</li>
</ul>
<h4>2.2 增加独立的撤单接口</h4>
<ul>
<li>增加独立的撤单接口 <a class="el" href="../../d7/d0a/oes__api_8h.html#aeeeab9ba7ea0f050d91c5cb55459e9c2" title="发送撤单请求 以单向异步消息的方式发送委托申报到OES服务器, OES的实时风控检查等处理结果将通过回报数据返...">OesApi_SendOrderCancelReq()</a></li>
<li>接口中 pCancelReq 参数的 pCancelReq-&gt;mktId 必填</li>
<li>接口中 pCancelReq 参数的 pCancelReq-&gt;invAcctId、pCancelReq-&gt;securityId 选填。如果填写则会与被撤委托作匹配</li>
<li>仍保留通过被撤委托 clOrdId 的方式进行撤单。倘若接口中 pCancelReq-&gt;origClOrdId &gt; 0，则优先通过pCancelReq-&gt;origClOrdId 来匹配被撤委托进行撤单</li>
<li>在通过被撤委托 clEnvId+clSeqNo 进行撤单的场景，倘若接口中 pCancelReq-&gt;origClEnvId = 0，则默认使用当前客户端实例绑定的 clEnvId 作为被撤委托的 clEnvId 进行撤单。也就是说，对于本客户端实例发出的委托进行撤单，撤单时 pCancelReq-&gt;origClEnvId 可以写0； <b>如果要对其他客户端实例发出的委托进行撤单，需要准确写撤单接口中的 pCancelReq-&gt;origClEnvId 字段</b></li>
</ul>
<h4>2.3 回报通道支持消息订阅功能</h4>
<ul>
<li>默认情况下，订阅所有类型的回报消息</li>
<li>配置文件相关设置请参考oes_client_sample.conf 中 [oes_client].rpt.subcribeRptTypes 参数的设置</li>
</ul>
<h4>2.4 新增资金变动、持仓变动通知</h4>
<ul>
<li>回报新增两个推送消息：OESMSG_RPT_CASH_ASSET_VARIATION (资金变动通知)、OESMSG_RPT_STOCK_HOLDING_VARIATION (持仓变动通知)</li>
<li>当因委托请求、委托成交、委托撤单而引起可用资金、可用持仓变动时，会触发回报通道的资金变动/持仓变动通知</li>
<li>以一笔买委托为例，OES服务端将会依次推送如下消息：<ol type="1">
<li>OESMSG_RPT_ORDER_INSERT 消息 (新委托触发)</li>
<li>OESMSG_RPT_CASH_ASSET_VARIATION 消息（因资金冻结触发）</li>
<li>OESMSG_RPT_ORDER_REPORT 消息（因交易所委托回报触发）</li>
<li>OESMSG_RPT_TRADE_REPORT 消息（因交易所成交回报触发）</li>
<li>OESMSG_RPT_CASH_ASSET_VARIATION 消息（因成交引起资金扣减触发）</li>
<li>OESMSG_RPT_STOCK_HOLDING_VARIATION 消息（因成交引起持仓增加触发）</li>
</ol>
</li>
</ul>
<h4>2.5 补充被撤委托的状态推送</h4>
<ul>
<li>以一笔买委托被成功撤单为例，回报通道会依次推送如下回报消息：<ol type="1">
<li>撤单委托的 OESMSG_RPT_ORDER_INSERT 消息</li>
<li>撤单委托的 OESMSG_RPT_ORDER_REPORT 消息</li>
<li><b>被撤</b> 委托的 OESMSG_RPT_ORDER_REPORT 消息</li>
<li>OESMSG_RPT_CASH_ASSET_VARIATION 消息（因释放冻结资金触发）</li>
</ol>
</li>
</ul>
<h4>2.6 查询接口回调方法类型定义调整</h4>
<ul>
<li>调整查询接口回调方法类型定义 F_OESAPI_ONMSG_T =&gt; F_OESAPI_ON_QRY_MSG_T</li>
<li>查询接口回调方法中增加参数 <a class="el" href="../../d9/d23/structOesQryCursorT.html" title="查询定位的游标结构 ">OesQryCursorT</a> *pQryCursor，使用 pQryCursor-&gt;isEnd 判断是否是查询的最后一条</li>
</ul>
<h4>2.7 持仓信息中增加持仓成本相关字段</h4>
<ul>
<li>'股票持仓信息 (<a class="el" href="../../df/d18/structOesStkHoldingItemT.html" title="查询到的股票持仓信息内容 ">OesStkHoldingItemT</a>)' 结构体中增加字段:<ol type="1">
<li>日初总持仓成本 (originalCostAmt)</li>
<li>日中累计买入金额 (totalBuyAmt)</li>
<li>日中累计卖出金额 (totalSellAmt)</li>
<li>日中累计买入费用 (totalBuyFee)</li>
<li>日中累计卖出费用 (totalSellFee)</li>
<li>持仓成本价 (costPrice)</li>
</ol>
</li>
</ul>
<h4>2.8 回报接口回调方法类型定义调整</h4>
<ul>
<li>回报接口回调方法类型定义调整 F_OESAPI_ONMSG_T =&gt; F_OESAPI_ON_RPT_MSG_T</li>
<li>回报接口回调方法实际参数列表没有变化</li>
</ul>
<h4>2.9 其他调整</h4>
<ul>
<li>委托回报信息中增加独立的交易所错误码字段<ol type="1">
<li>原错误码字段 <a class="el" href="../../df/dc7/structOesOrdCnfmT.html#a834a5c08259b8cfad1fbb288fd869095" title="订单/撤单拒绝原因 ">OesOrdCnfmT.ordRejReason</a> 保持不变</li>
<li>当委托被交易所打回废单后，OesOrdCnfmT.ordRejReason 释义为 “交易所拒绝”，此时具体错误原因需要参考 OesOrdCnfmT.exchErrCode，此字段携带交易所定义的错误码</li>
</ol>
</li>
<li>委托状态定义调整<ol type="1">
<li>删除 'OES_ORD_STATUS_DECLARING (正报)' 状态</li>
<li>重命名 OES_ORD_STATUS_NORMAL =&gt; OES_ORD_STATUS_NEW (新订单)</li>
<li>保留 OES_ORD_STATUS_NORMAL 定义作为版本切换间的兼容</li>
</ol>
</li>
<li>回报消息类型定义调整<ol type="1">
<li>重命名回报消息类型 OESMSG_RPT_ORDER_REJECT =&gt; OESMSG_RPT_BUSINESS_REJECT (OES业务拒绝, 委托/撤单未通过风控检查等)</li>
<li>保留 OESMSG_RPT_ORDER_REJECT 定义作为版本切换间的兼容</li>
</ol>
</li>
<li>调整 '资金信息(OesCashAssetItemT)' 中部分字段:<ol type="1">
<li>'当前余额'字段重命名 currentBal =&gt; currentTotalBal</li>
</ol>
</li>
<li>新增API接口 '获取API的发行版本号 (OesApi_GetApiVersion)'</li>
<li>新增API接口 '获取当前交易日 (OesApi_GetTradingDay)'</li>
<li>调整佣金查询结果中feeRate字段的精度，当佣金计算模式为 ‘按金额’ 时，feeRate 字段所代表的比率精度由 '百万分之一' =&gt; '千万分之一'</li>
</ul>
<hr/>
<h2>OES_0.15.3 / 2017-08-14 </h2>
<h3>更新内容</h3>
<ol type="1">
<li>现货产品基础信息(OesStockBaseInfoT) 中<ul>
<li>调整字段 isQualificationRequired =&gt; qualificationClass, 取值请参考 eOesQualificationClassT</li>
<li>新增字段 产品风险等级(securityRiskLevel)，取值请参考 eOesSecurityRiskLevelT</li>
<li>新增字段 逆回购期限(repoExpirationDays)</li>
<li>新增字段 占款天数(cashHoldDays) 字段</li>
</ul>
</li>
<li>客户资金基础信息(OesCashAssetBaseInfoT) 中<ul>
<li>字段重命名 期初余额(originalBal =&gt; beginningBal)</li>
<li>新增字段 期初可用余额(beginningAvailableBal)</li>
<li>新增字段 期初可取余额(beginningDrawableBal)</li>
<li>新增字段 当前冲正金额(红冲蓝补的资金净额, reversalAmt)</li>
<li>新增字段 当前余额(currentBal)</li>
<li>字段重命名 当前可用余额(tradeAvlAmt =&gt; currentAvailableBal)</li>
<li>字段重命名 当前可取余额(withdrawAvlAmt =&gt; currentDrawableBal)</li>
</ul>
</li>
<li>客户基础信息(OesCustBaseInfoT) 中<ul>
<li>新增 机构标志(institutionFlag) 字段</li>
<li>新增 投资者分类(investorClass) 字段</li>
</ul>
</li>
<li>证券账户基础信息(OesInvAcctBaseInfoT) 中<ul>
<li>调整字段 '(股东账户权限限制, acctLimit)'<ul>
<li>类型 uint32 =&gt; uint64</li>
<li>重命名 acctLimit =&gt; Limits</li>
</ul>
</li>
<li>调整字段 '(股东权限/客户权限, acctRight)'<ul>
<li>类型 uint32 =&gt; uint64</li>
<li>重命名 acctRight =&gt; permissions</li>
</ul>
</li>
</ul>
</li>
<li>API接口中新增 发送出入金委托请求(OesApi_SendFundTrsfReq) 接口</li>
<li>API接口中新增 查询新股配号、中签信息(OesApi_QueryLotWinning) 接口</li>
<li>新增 ‘新股认购、中签信息查询’ 相关报文定义<ul>
<li>新增字段 查询新股认购、中签信息过滤条件(OesQryLotWinningFilterT)</li>
<li>新增字段 新股认购、中签信息内容(OesLotWinningItemT)</li>
<li>新增字段 查询新股认购、中签信息请求(OesQryLotWinningReqT)</li>
<li>新增字段 查询新股认购、中签信息应答(OesQryLotWinningRspT)</li>
</ul>
</li>
<li>出入金业务拒绝消息类型变更 <a class="el" href="../../dd/d66/structOesFundTrsfReqT.html" title="出入金请求定义 ">OesFundTrsfReqT</a> =&gt; <a class="el" href="../../dd/dca/structOesFundTrsfRejectT.html" title="出入金拒绝的回报结构定义 (因风控检查未通过而被OES拒绝) ">OesFundTrsfRejectT</a></li>
<li>出入金委托回报的结构体(OesFundTrsfReportT) 中新增字段 错误码信息(errorInfo)</li>
<li>出入金委托状态(eOesFundTrsfStatusT) 中<ul>
<li>调整宏定义 OES_FUND_TRSF_STS_RECV =&gt; OES_FUND_TRSF_STS_UNDECLARED</li>
<li>调整宏定义 OES_FUND_TRSF_STS_DCLR =&gt; OES_FUND_TRSF_STS_DECLARED</li>
<li>新增状态 指令已报到主柜前待回滚(OES_FUND_TRSF_STS_UNDECLARED_ROLLBACK)</li>
<li>新增状态 指令已报到主柜后待回滚(OES_FUND_TRSF_STS_DECLARED_ROLLBACK)</li>
<li>新增状态 出入金指令完成，等待事务结束(OES_FUND_TRSF_STS_WAIT_DONE)</li>
<li>新增状态 出入金执行的挂起状态(OES_FUND_TRSF_STS_SUSPENDED)</li>
</ul>
</li>
<li>权限不足交易失败时的错误码细分(详情请见 README 错误码表部分)</li>
</ol>
<hr/>
<h2>OES_0.12.9 / 2017-06-06 </h2>
<h3>更新内容</h3>
<ol type="1">
<li>使用API发起新股认购时，认购委托的bsType需要填成 ‘OES_BS_TYPE_SUBSCRIPTION’</li>
<li>可以使用API的查询股东账户接口(OesApi_QueryInvAcct)获取该股东账户的新股认购额度(<a class="el" href="../../db/d02/structOesInvAcctItemT.html#a46716c25738883482dee51d499583461" title="主板权益 (新股认购限额) ">OesInvAcctItemT.subscriptionQuota</a>)</li>
<li>可以使用API的查询证券发行产品信息接口(OesApi_QueryIssue)获取当日可认购的新股信息(OesIssueItemT)</li>
<li>可以使用API的查询现货产品信息接口(OesApi_QueryStock)获取债券的每百元应计利息额(<a class="el" href="../../d7/d79/structOesStockBaseInfoT.html#a15aaa5ead550ea31667fe3938dec7ca6" title="债券的每张应计利息, 单位精确到元后八位, 即应计利息1元 = 100000000 ">OesStockItemT.bondInterest</a>)， 此字段精确到元后八位，即123400000相当于一元二角三分四厘</li>
<li>买卖国债委托涉及的利息，可以参考‘委托确认信息(OesOrdCnfmT)’中的‘冻结利息(frzInterest)’、‘已发生利息(cumInterest)’字段</li>
<li>买卖国债成交涉及的利息，可以参考‘成交确认信息(OesTrdCnfmT)’中的‘已发生利息(cumInterest)’字段</li>
<li>‘买卖类型’的宏定义重命名，具体请参考OES_0.12.8.2版本修改历史。原始宏定义将在下一个版本之后被废弃</li>
</ol>
<hr/>
<h2>OES_0.12.7 / 2017-04-13 </h2>
<h3>1. 主要更新内容</h3>
<ol type="1">
<li>使用API发逆回购委托时，逆回购委托的bsType需要赋值成 ‘OES_BS_TYPE_CS’，而不是普通的‘卖出’。</li>
<li>使用API发逆回购委托时，ordQty 字段代表的单位是‘张’而不是‘手’。</li>
<li>回报通道增加两类消息：‘出入金委托响应-业务拒绝（OESMSG_RPT_FUND_TRSF_REJECT）’ 和‘出入金委托执行报告(OESMSG_RPT_FUND_TRSF_REPORT)’ 。<ul>
<li>出入金委托业务拒绝回报消息的回报消息体结构为 OesFundTrsfReqT，</li>
<li>出入金委托执行报告回报消息的回报消息体结构为 OesFundTrsfReportT，</li>
<li>如果不在oes系统内做出入金可以忽略这两类回报消息</li>
</ul>
</li>
<li>在mds_api.h、oes_api.h中增加sutil库头文件的引用，API使用者只需引用mds_api.h、oes_api.h， 不再需要显式引用sutil库的头文件</li>
</ol>
<h3>2. 其他调整：</h3>
<ol type="1">
<li>不再有独立的出入金通道，client的配置中可以去掉62**端口的配置了</li>
<li>调整佣金查询结果中feeRate字段的精度，当佣金计算模式为 ‘按金额’ 时， feeRate 字段所代表的比率精度由 '十万分之一' =&gt; '百万分之一'</li>
<li>‘费用计算模式’ 的宏定义名称的调整 eOesCalFeeModeT =&gt; eOesCalcFeeModeT</li>
<li>新增债券、基金的证券类别，调整ETF证券类别宏定义的取值</li>
<li>新增证券子类别定义</li>
<li>现货产品基础信息中增加“证券子类别”字段，并且重命名“买入单位”、“卖出单位”字段</li>
<li>ETF产品基础信息中增加“证券类别”、“证券子类别”字段</li>
<li>ETF成份股基础信息中增加“证券子类别”字段 </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 20 2020 18:42:46 for OesApi by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
